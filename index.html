<!DOCTYPE html>
<html>
<head>
    <title>DodMiner</title>
    <style>
      body {
          background-image: url('https://a-static.besthdwallpaper.com/bloody-mary-lunox-mobile-legends-ml-wallpaper-828x1792-67890_218.jpg');
          background-size: cover;
          background-repeat: no-repeat;
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          height: 100vh;
          margin: 0;
          font-family: 'Arial', sans-serif;
          color: #fff;
          text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
      }

      .energy-gauge { /* –°—Ç–∏–ª–∏ –¥–ª—è —Ç–∞–±–ª–æ —ç–Ω–µ—Ä–≥–∏–∏ */
          position: relative; width: 100px; height: 45px;
          background-color: #222; border-radius: 10px;
          overflow: hidden; margin-top: 20px;
      }

      .energy-bar { /* –ü–æ–ª–æ—Å–∞ —ç–Ω–µ—Ä–≥–∏–∏ */
          position: absolute; bottom: 0; left: 0;
          width: 100%; height: 0%; background-color: #ffc107;
          transition: height 0.3s ease;
      }

      .energy-text { /* –¢–µ–∫—Å—Ç —ç–Ω–µ—Ä–≥–∏–∏ */
          position: absolute; top: 50%; left: 50%;
          transform: translate(-50%, -50%); font-size: 12px;
          color: #fff; z-index: 1;
      }

      .diamond { /* –°—Ç–∏–ª—å –∞–ª–º–∞–∑–∞ */
          width: 120px; height: 120px;
          background-color: #64b5f6; border-radius: 50%;
          display: flex; align-items: center; justify-content: center;
          font-size: 30px; cursor: pointer; color: #fff;
          transition: transform 0.2s, box-shadow 0.2s;
          box-shadow: 0 4px 8px rgba(0,0,0,0.3);
      }

      .diamond:hover {
          transform: scale(1.1); box-shadow: 0 6px 12px rgba(0,0,0,0.5);
      }

      .profile-button { /* –ö–Ω–æ–ø–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è */
          position: absolute; top: 20px; right: 20px;
          width: 60px; height: 60px; border-radius: 50%;
          background-color: #ffc107; display: flex;
          align-items: center; justify-content: center;
          cursor: pointer; transition: transform 0.2s, box-shadow 0.2s;
          box-shadow: 0 2px 4px rgba(0,0,0,0.3);
          color: #333; font-size: 24px;
      }

      .profile-button:hover {
          transform: scale(1.1); box-shadow: 0 4px 8px rgba(0,0,0,0.5);
      }

      .invite-button, .leaderboard-button { /* –ö–Ω–æ–ø–∫–∏ */
          margin-top: 20px; padding: 12px 24px;
          background-color: #4caf50; color: #fff;
          border: none; border-radius: 5px;
          cursor: pointer; transition: transform 0.2s, box-shadow 0.2s;
          box-shadow: 0 2px 4px rgba(0,0,0,0.3);
          font-size: 16px;
      }

      .invite-button:hover, .leaderboard-button:hover {
          transform: scale(1.05); box-shadow: 0 4px 8px rgba(0,0,0,0.5);
      }

      .referral-link { /* –°—Ç–∏–ª—å –¥–ª—è —Ä–µ—Ñ. —Å—Å—ã–ª–∫–∏ */
          background-color: #3498db; color: #fff;
          padding: 10px 20px; border-radius: 5px;
          display: inline-block; margin-top: 20px;
      }

      #background-url { /* –ü–æ–ª–µ URL —Ñ–æ–Ω–∞ */
          padding: 10px; border: 1px solid #ccc;
          border-radius: 5px; margin-right: 10px;
          color: #333;
      }
    </style>
</head>
<body>

  <a href="oos.html"><div class="profile-button">üë§</div></a>

  <div id="diamond-count">üíé –ê–ª–º–∞–∑–æ–≤: 0.00</div>
  <div class="diamond" onclick="mineDiamond()">üíé</div>
  <div id="mine-text"></div>

  <div class="energy-gauge">
      <div class="energy-bar" id="energy-bar"></div>
      <div class="energy-text" id="energy-text">‚ö° 500</div>
  </div>

  <a href="#" class="referral-link" onclick="generateReferralLink()">–ü–æ–ª—É—á–∏—Ç—å —Ä–µ—Ñ. —Å—Å—ã–ª–∫—É</a>

  <a href="lider.html"><button class="leaderboard-button">–õ–∏–¥–µ—Ä—ã</button></a>

  <div type="url" id="background-url" placeholder="https://digiseller.mycdn.ink/preview/1280933/p1_4393124_7034c2c3.jpg">

  <script>
    let energy = 500; // –ù–∞—á–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —ç–Ω–µ—Ä–≥–∏–∏
    let diamondCount = 0.00; // –ù–∞—á–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–ª–º–∞–∑–æ–≤

    function updateEnergyDisplay() {
        const energyPercentage = (energy / 500) * 100;
        document.getElementById('energy-bar').style.height = `${energyPercentage}%`;
        document.getElementById('energy-text').innerText = `‚ö° ${energy}`;
    }

    function mineDiamond() {
        if (energy > 0) {
            energy--;
            diamondCount += 0.02;

            updateEnergyDisplay();

            document.getElementById('diamond-count').innerText = `üíé –ê–ª–º–∞–∑–æ–≤: ${diamondCount.toFixed(2)}`;
            document.getElementById('mine-text').innerText = 'Dod-Mine';
        } else {
            alert("–ù–µ—Ç —ç–Ω–µ—Ä–≥–∏–∏! –ü–æ–¥–æ–∂–¥–∏—Ç–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è.");
        }
    }

    function generateReferralLink() { //–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Å—ã–ª–∫—É
        const referralCode = generateReferralCode();
        const referralLink = `https://t.me/MLBB_Assanofbot?start=${referralCode}`; // –°—Å—ã–ª–∫–∞ –¥–ª—è —Ç–µ–ª–µ–≥—Ä–∞–º –±–æ—Ç–∞
        alert("–í–∞—à–∞ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞: " + referralLink);
    }

    function generateReferralCode() { //–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–æ–¥
        return Math.random().toString(36).substring(2, 15);
    }

    window.onload = function() { //–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ–¥ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        const urlParams = new URLSearchParams(window.location.search);
        const startParam = urlParams.get('start');
        if (startParam) {
            sendReferralCodeToServer(startParam);
        }
    }

    async function sendReferralCodeToServer(code) { //–û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
        try {
            const response = await fetch('/register_referral', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({referralCode: code})
            });
            if (response.ok) {
                diamondCount += 2; // –ü—Ä–∏–±–∞–≤–ª—è–µ–º 2 –∞–ª–º–∞–∑–∞
                document.getElementById('diamond-count').innerText = `üíé –ê–ª–º–∞–∑–æ–≤: ${diamondCount.toFixed(2)}`;
            }
        } catch (error) {
            console.error("–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ä–µ—Ñ. –∫–æ–¥–∞:", error);
        }
    }

    function changeBackground() {
        var url = document.getElementById('background-url').value;
        document.body.style.backgroundImage = `url('${url}')`;
    }

    updateEnergyDisplay();
  </script>

</body>
</html>
